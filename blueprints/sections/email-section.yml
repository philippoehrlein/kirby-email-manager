type: fields
fields:
  email_templates_headline:
    label: panel.templates.headline
    type: headline

  email_templates:
    label: panel.templates.label
    type: select
    options: query
    required: true
    query:
      fetch: kirby.option('philippoehrlein.kirby-email-manager.templates')
      text: "{{ item.name }}"
      value: "{{ item.id }}"

  send_to_more:
    type: toggle
    label: panel.email.send_to_more_label
    text: 
      - panel.email.send_to_one
      - panel.email.send_to_many

  send_to:
    label: panel.email.send_to_label
    type: email
    when:
      send_to_more: false
    required: true

  send_to_success_title:
    label: panel.success.title_label
    type: text
    when:
      send_to_more: false
    required: true

  send_to_success_text:
    label: panel.success.text_label
    type: writer
    when:
      send_to_more: false
    required: true

  send_to_structure:
    label: panel.email.send_to_structure_label
    type: structure
    when:
      send_to_more: true
    columns:
      topic: 
        width: 1/2
      email:
        width: 1/2
    fields:
      topic:
        label: panel.email.topic_label
        type: text
        required: true
      email:
        label: panel.email.email_label
        type: email
        required: true
      success_title:
        label: panel.success.title_label
        type: text
        required: true
      success_text:
        label: panel.success.text_label
        type: writer
        required: true
    help: panel.email.send_to_structure_help
    required: true